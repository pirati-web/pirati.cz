Foundation.Interchange.SPECIAL_QUERIES["medium down"]="screen and (max-width: 63.9375em)",$(document).foundation(),$(document).on("replaced.zf.interchange",function(e){$(this).foundation()}),$("button[data-toggle]").on("click",function(){$(this).parent().hasClass("js-button-toggled")?$(this).parent().removeClass("js-button-toggled"):$(this).parent().addClass("js-button-toggled")}),window.onload=function(){};var choice_n_random=function(e,t){t=void 0!==t?t:3;for(var a=[];;){var n=e[Math.floor(Math.random()*e.length)];if(n.description&&(a.push(n),a.length==t))break}return a},choice_person=function(e,a,n){n=void 0!==n?n:null;var o=null;return $.each(e,function(e,t){t.uid!=a||((o=t).role=n)}),o?[o]:(console.log("Proper profile for "+a+" not exists."),[{name:a,role:n}])},choice_person_by_name=function(e,a){var n=[];return $.each(e,function(e,t){a.includes(t.name)&&n.push(t)}),n},choice_garant=function(e){return choice_person(e,page_garant,"garant")},choice_leader=function(e){return choice_person(e,page_leader,"předseda")},choice_contact=function(e){return choice_person(e,page_contact,"kontaktní osoba")},author_link=function(e,n){var t=n.text().split(",").map(function(e){return e.trim()}),o=choice_person_by_name(e,t);o.length!=t.length&&console.log("Někteří autoři nemají profil."),n.text(""),$.each(o,function(e,t){var a=e==o.length-1;$("<a>",{text:t.name,title:t.name,href:"https://www.pirati.cz"+t.url}).appendTo(n),a||n.append(", ")})},show_people=function(e,t,o){if(o.length){var a=t(e);$.get(snippet_profile,function(e){var n=Handlebars.compile(e);$.each(a,function(e,t){var a=n(t);o.append(a)})},"html")}},search=function(e){$("#searchsub").click(function(){var e="https://duckduckgo.com/?q=site:pirati.cz+"+$("#search").val();window.location.href=e}),$("#search").autocomplete({source:e,select:function(e,t){window.location.href=t.item.value}})},back_top=function(){$(window).scroll(function(){50<$(this).scrollTop()?$(".scrolltop:hidden").stop(!0,!0).fadeIn():$(".scrolltop").stop(!0,!0).fadeOut()}),$(function(){$(".scroll").click(function(){return $("html,body").animate({scrollTop:$(".thetop").offset().top},"1000"),!1})})},show_relatives=function(e){var n=$("#relatives");if(n.length){var a=e[0];page_tags.length||$("#relatives-box").hide(),$.each(page_tags,function(e,t){$.each(a[t],function(e,t){if(t.url!=page_url){var a=$("<li/>").appendTo(n);$("<a/>").text(t.title).attr("href",t.url).appendTo(a)}})})}},hideEvents=function(){new Date(this.attributes[0].value)<today||showed>limit?($this=$(this),$this.hide()):showed+=1},hideOldEvents=function(){new Date;$("#boattrip").children().each(hideEvents),$("#roadtrip").children().each(hideEvents)},makemap=function(e,i){var c=e[0].settings;$(c.id).width(c.size.width),$(c.id).height(c.size.height);var l=Raphael(c.id,c.size.width,c.size.height);$("#region-description>div").hide();var s=0,u=$("#regions-list"),d=$("#regions-list-2"),t=e[0].regions;$.each(t,function(e,a){if(s<7){var t=$("<li/>").appendTo(u);$("<a/>").text(a.name).attr("href",a[i]).appendTo(t)}else{var n=$("<li/>").appendTo(d);$("<a/>").text(a.name).attr("href",a[i]).appendTo(n)}s++;var o={title:a.name},r=$.extend(c.region_attrs,o);c.colors?a.color=Raphael.getColor():a.color="#666";a.id;$.each(a.paths,function(e,t){(t=l.path(t).scale(c.size.scale,c.size.scale,0,0).attr(r))[0].onclick=function(){$(location).attr("href",a[i])},t[0].ondblclick=function(){window.open(a[i])},t[0].onmouseover=function(){t.animate({fill:a.color},500).attr({cursor:"pointer"})},t[0].onmouseout=function(){t.animate({fill:"#333"},500)}})})};function formatNumber(e,t){var a="";if(null!=e){a=e.toString(),blockCount=Math.floor((a.length-1)/3);for(var n=0;n<blockCount;n++)a=a.slice(0,a.length-3*(n+1)-n)+" "+a.slice(a.length-3*(n+1)-n);0!=e&&null!=t?a=t+a+",-":a+=",-"}return a}function formatPercent(e){var t="";return null!=e&&((t=Math.abs(e).toString()).replace(".",","),t=(0<e?"-":"+")+t+" %"),t}function calculate(){var e=$("#dane-akt-hruba-in"),t=$("#dane-akt-deti"),a=$("#dane-akt-student"),n=$("#dane-akt-superhruba"),o=$("#dane-akt-socialni"),r=$("#dane-akt-zdravotni"),i=$("#dane-akt-hruba"),c=$("#dane-akt-socialni-obc"),l=$("#dane-akt-zdravotni-obc"),s=$("#dane-akt-dan"),u=$("#dane-akt-solidarni"),d=$("#dane-akt-slevy"),h=$("#dane-akt-bonus"),p=$("#dane-akt-cista"),f=$("#dane-akt-efektivni"),m=$("#dane-pir-hruba"),v=$("#dane-pir-dan"),g=$("#dane-pir-slevy"),k=$("#dane-pir-bonus"),_=$("#dane-pir-cista"),b=$("#dane-pir-efektivni"),x=$("#dane-rozdil"),w=e.val(),N=t.val();null==N&&(N=0);var C=a.is(":checked");if(null!=w&&11e3<=w){w=Math.ceil(w),N=Math.ceil(N);var y=Math.ceil(.25*w);28232<y&&(y=28232);var E=Math.ceil(.09*w),M=w+y+E,T=0,z=w;112928<z&&(z=112928,T=Math.ceil(.07*(w-112928)));var j=Math.ceil(.065*z),B=Math.ceil(.045*w),I=100*Math.ceil(M/100),q=Math.ceil(.15*I),P=2070;C&&(P+=335);var S=q-P;S<0&&(S=0);for(var D=0,O=0;O<N;O++)D+=0==O?1117:1==O?1617:2017;var R=w-j-B-(S-=D)-T,U=Math.ceil(1e4*(1-R/M))/100,A=Math.ceil(.47*M),F=A-P;F<0&&(F=0);var L=M-(F-=D),H=Math.ceil(1e4*(1-L/M))/100,Q=L-R;n.text(formatNumber(M)),o.text(formatNumber(y,"+")),r.text(formatNumber(E,"+")),i.text(formatNumber(w,"")),c.text(formatNumber(j,"-")),l.text(formatNumber(B,"-")),s.text(formatNumber(q,"-")),u.text(formatNumber(T,"-")),d.text(formatNumber(P,"+")),h.text(formatNumber(D,"+")),p.text(formatNumber(R)),f.text(formatPercent(U)),m.text(formatNumber(M)),v.text(formatNumber(A,"-")),g.text(formatNumber(P,"+")),k.text(formatNumber(D,"+")),_.text(formatNumber(L)),b.text(formatPercent(H)),x.text(formatNumber(Q,0<Q?"+":"")),0<=Q?(x.hasClass("dane-result-minus")&&x.removeClass("dane-result-minus"),x.hasClass("dane-result-plus")||x.addClass("dane-result-plus")):(x.hasClass("dane-result-minus")||x.addClass("dane-result-minus"),x.hasClass("dane-result-plus")&&x.removeClass("dane-result-plus"))}else n.text(""),o.text(""),r.text(""),i.text(""),c.text(""),l.text(""),s.text(""),u.text(""),d.text(""),h.text(""),p.text(""),f.text(""),m.text(""),v.text(""),g.text(""),k.text(""),_.text(""),b.text(""),x.text("")}function calculateClick(){var e=$("#dane-akt-hruba-in").val();null!=e&&11e3<=e?($("#div-calculator").removeClass("hidden-start"),$("#div-calculator-info").removeClass("hidden-start"),$("#div-calculator-text").removeClass("hidden-start"),$("#div-chcete-vedet-vic").removeClass("hidden-start"),calculate(),$("html, body").animate({scrollTop:$("#div-calculator").offset().top},500)):$("#dane-error-in").removeClass("hidden")}$(function(){if($.get(api_search).done(search).fail(function(e){console.log("Error in search:",e)}),back_top(),hideOldEvents(),$.get(api_people).done(function(e){show_people(e,choice_n_random,$("#people")),show_people(e,choice_garant,$("#garant")),show_people(e,choice_leader,$("#leader")),page_leader!=page_contact&&show_people(e,choice_contact,$("#contact")),"post"==page_layout&&author_link(e,$("#authors"))}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#relatives").length&&$.get(api_tags).done(function(e){show_relatives(e)}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#regions-map").length){var t="url";"/volby/2017/"==page_url&&(t="kandidatka"),$.get(api_regions).done(function(e){makemap(e,t)}).fail(function(e){console.log("Error: map")})}}),$().ready(function(){$("#dane-button-calculate").on("click",calculateClick),$("#dane-akt-hruba-in").on("keyup",calculate).on("change",calculate),$("#dane-akt-deti").on("keyup",calculate).on("change",calculate),$("#dane-akt-student").on("change",calculate),$("#dane-akt-hruba-in").on("focus",function(){$(this).hasClass("hidden")||$("#dane-error-in").addClass("hidden")})}),window.twttr=function(e,t,a){var n,o=e.getElementsByTagName("script")[0],r=window.twttr||{};return e.getElementById(a)||((n=e.createElement("script")).id=a,n.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(n,o),r._e=[],r.ready=function(e){r._e.push(e)}),r}(document,0,"twitter-wjs"),window.fbAsyncInit=function(){FB.init({appId:"1526197851008996",xfbml:!0,version:"v2.5"})},function(e,t,a){var n,o=e.getElementsByTagName("script")[0];e.getElementById(a)||((n=e.createElement("script")).id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,0,"facebook-jssdk");var _paq=_paq||[];_paq.push(["setDomains",["*.www.pirati.cz"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//piwik.pirati.cz/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","1"]);var t=document,a=t.createElement("script"),n=t.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e+"piwik.js",n.parentNode.insertBefore(a,n)}();